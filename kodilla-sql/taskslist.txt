CREATE TABLE ISSUESLISTS
(
              ID                     SERIAL PRIMARY KEY,
    NAME   VARCHAR(100) UNIQUE
);

CREATE TABLE ISSUES
(
              ID               SERIAL PRIMARY KEY,
    ISSUESLIST_ID  BIGINT UNSIGNED NOT NULL,
    SUMMARY       VARCHAR(512),
    DESCRIPTION       VARCHAR(10000),    
	USER_ID_ASSIGNEDTO  BIGINT UNSIGNED NOT NULL,
	
    FOREIGN KEY (ISSUESLIST_ID) REFERENCES ISSUESLISTS(ID),
	FOREIGN KEY (USER_ID_ASSIGNEDTO) REFERENCES USERS(ID)
);

INSERT INTO ISSUESLISTS (NAME)
VALUES ("ToDo");
INSERT INTO ISSUESLISTS (NAME)
VALUES ("In progress");
INSERT INTO ISSUESLISTS (NAME)
VALUES ("DOne");

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task 1", "Do task 1", 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task 2", "Do task 2", 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task 3", "Do task 3", 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task 4", "Do task 4", 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (1, "Task 5", "Do task 5", 2);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Task 6", "Do task 6", 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Task 7", "Do task 7", 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Task 8", "Do task 8", 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Task 9", "Do task 9", 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (2, "Task 10", "Do task 10", 2);

INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Task 11", "Do task 11", 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Task 12", "Do task 12", 1);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Task 13", "Do task 13", 2);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Task 14", "Do task 14", 3);
INSERT INTO ISSUES (ISSUESLIST_ID, SUMMARY, DESCRIPTION, USER_ID_ASSIGNEDTO)
VALUES (3, "Task 15", "Do task 15", 2);

COMMIT;


SELECT L.NAME, I.SUMMARY, I.DESCRIPTION
FROM  ISSUESLISTS L
JOIN ISSUES I ON L.ID = I.ISSUESLIST_ID;

SELECT U.FIRSTNAME, U.LASTNAME, I.DESCRIPTION
FROM  USERS U
JOIN ISSUES I ON U.ID = I.USER_ID_ASSIGNEDTO;

SELECT U.FIRSTNAME, U.LASTNAME, COUNT(*) AS TASKS_NUMBER
FROM USERS U JOIN ISSUES I ON U.ID = I.USER_ID_ASSIGNEDTO
GROUP BY I.USER_ID_ASSIGNEDTO
HAVING COUNT(*) > 0;

//wstawienie nowego postu, modyfikacja i usuniÄ™cie
INSERT INTO POSTS (USER_ID, BODY)
VALUES (1, "This is post to delete!");

COMMIT;

UPDATE POSTS
SET BODY = "This is post to update!"
WHERE ID = 7;

COMMIT;

DELETE FROM POSTS
WHERE ID = 7;

COMMIT;










